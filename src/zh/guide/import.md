# 从旧版本的数据库导入

如果您现在正在使用兰空图床付费版本(1.7.x)，可以根据此章节将您的旧版本数据迁移至 2.x 版本中。

由于旧版本与新版本存在非常大的差异，旧版本无法直接通过在线或离线更新的方式升级到最新版本，但是我们在 2.x 版本中内置了迁移脚本。尽管如此，还是有部分数据无法完整无缝的迁移到新版本中，需要手动处理。

::: warning
迁移脚本仅迁移数据库，如果您使用了本地的储存，则需要手动将文件移动到新站点中的指定文件夹中。
:::

## 可以迁移的数据

系统设置、SMTP 配置、支付驱动、社会化登录驱动、角色组、储存策略、组与储存策略关联、用户、系统套餐、工单、图片、相册、分享、订单、公告、举报、违规记录、页面、意见与反馈、第三方授权。

## 无法迁移的数据

优惠券、点赞记录、订单部分信息、页面内容、套餐内的赠送容量以及组设置。

## 需要调整的数据

- 套餐需要重新设置赠送容量和角色组
- 页面内容需要补充

## 如何迁移

### 安装 2.x 版本

您必须要创建一个新站点安装 2.x 版本，请参考[安装](./install)章节。

### 执行迁移

登录服务器 SSH 终端，进入新站点的根目录，执行导入数据命令：

```shell
$ php artisan app:import
```

然后根据提示内容，输入旧版本的数据库连接地址等配置信息，2.x 版本程序会连接旧版本数据库，将数据导入到新版本数据库中，迁移过程中旧站点不受影响，可以正常运行。

迁移完毕后即可使用旧版本中的管理员账号，登录新站点的后台。